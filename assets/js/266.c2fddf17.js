/*! For license information please see 266.c2fddf17.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_optics_docs=self.webpackChunkreact_optics_docs||[]).push([[266],{3905:function(e,t,n){n.d(t,{Zo:function(){return a},kt:function(){return d}});var r=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},a=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,i=e.originalType,u=e.parentName,a=c(e,["components","mdxType","originalType","parentName"]),p=l(n),d=s,y=p["".concat(u,".").concat(d)]||p[d]||f[d]||i;return n?r.createElement(y,o(o({ref:t},a),{},{components:n})):r.createElement(y,o({ref:t},a))}));function d(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=n.length,o=new Array(i);o[0]=p;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:s,o[1]=c;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2137:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Optic=void 0;const r=n(4553),s=n(7288);class i{constructor(e){this.cache=new Map,this.get=e=>{const t=this.lenses.reduce(((e,t)=>"fold"!==t.type&&(e||"mapped"===t.type||"foldMultiple"===t.type)),!1),n=(e,t,s=!1)=>{const[i,...o]=t;if(!i)return e;if("mapped"===i.type){const t=this.cache.get(i);if(!s&&t){const[n,r]=t;if(n===e)return r}const c=i.get(e),u=s?c.flat():c,l=o[0]&&!(0,r.isFold)(o[0])?u.filter((e=>null!=e)):u,a=l.length>0?n(l,o,!0):void 0;return s||this.cache.set(i,[e,a]),a}if("fold"===i.type){const t=i.get(e);if(-1===t)return;return n(e[t],o,!1)}if("foldMultiple"===i.type){const t=i.get(e);if(0===t.length)return[];const r=Array(t.length).fill(void 0).map(((n,r)=>e[t[r]]));return n(r,o,!0)}if(s){const t=e.map(i.get),c=(0,r.isFold)(o[0])?t:t.filter((e=>null!=e));return c.length>0?n(c,o,s):void 0}const c=i.get(e);return null==c?c:n(c,o,s)},s=n(e,this.lenses);return t&&null==s?[]:s},this.set=(e,t)=>{const n=(e,t,s=this.lenses,i=(0,r.getFoldTree)(s,t))=>{const[o,...c]=s;if(!o)return"function"==typeof e?e(t):e;if((0,r.isFold)(o))return n(e,t,c);const u=o.get(t);if(c.length>0&&null==u)return t;if("mapped"===o.type){const r=i?u.map(((t,r)=>i[r]?n(e,t,c,i[r]):t)):u.map((t=>c.length>0&&null==t?t:n(e,t,c,i)));return u.some(((e,t)=>e!==r[t]))?o.set(r,t):t}const l=n(e,u,c,i);return u===l?t:o.set(l,t)};return n(e,t)},this.focus=e=>new i("number"==typeof e?[...this.lenses,{get:t=>t[e],set:(t,n)=>[...n.slice(0,e),t,...n.slice(e+1)],key:"focus index "+e}]:[...this.lenses,...e.split(/\.|\?\./).map((e=>({key:"focus "+e,get:t=>t[e],set:(t,n)=>Array.isArray(n)?[...n.slice(0,e),t,...n.slice(e+1)]:Object.assign(Object.assign({},n),{[e]:t})})))]),this.focusMany=(e,t)=>e.reduce(((e,n)=>{const r=n.toString(),s=""!==t?r.charAt(0).toUpperCase():r.charAt(0);return e[(null!=t?t:"on")+s+r.slice(1)]=this.focus(n),e}),{}),this.getKeys=()=>this.lenses.map((e=>e.key.toString())),this.compose=e=>new i([...this.lenses,...e.lenses]),this.refine=e=>new i([...this.lenses,{get:t=>!1===e(t)?void 0:t,set:(t,n)=>!1===e(n)?n:t,key:"refine"}]),this.convert=(e,t)=>new i([...this.lenses,{get:(0,s.stabilize)(e),set:t,key:"convert"}]),this.map=()=>new i([...this.lenses,{get:e=>e,set:e=>e,key:"map",type:"mapped"}]),this.entries=()=>new i([...this.lenses,{get:e=>Object.entries(e),set:e=>Object.fromEntries(e),type:"mapped",key:"entries"}]),this.values=()=>new i([...this.lenses,{get:e=>Object.values(e),set:(e,t)=>Object.keys(t).reduce(((t,n,r)=>(t[n]=e[r],t)),{}),type:"mapped",key:"values"}]),this.if=e=>new i([...this.lenses,{get:t=>!0===e(t)?t:void 0,set:(t,n)=>!0===e(n)?t:n,key:"if"}]),this.findFirst=e=>new i([...this.lenses,{get:t=>t.findIndex(e),set:s.noop,type:"fold",key:"findFirst"}]),this.maxBy=e=>new i([...this.lenses,{get:t=>t.reduce((({maxValue:t,indexOfMax:n},r,s)=>{const i=e(r);return{maxValue:i>t?i:t,indexOfMax:i>t?s:n}}),{maxValue:Number.MIN_VALUE,indexOfMax:-1}).indexOfMax,set:s.noop,type:"fold",key:"maxBy"}]),this.minBy=e=>new i([...this.lenses,{get:t=>t.reduce((({minValue:t,indexOfMin:n},r,s)=>{const i=e(r);return{minValue:i<t?i:t,indexOfMin:i<t?s:n}}),{minValue:Number.MAX_VALUE,indexOfMin:-1}).indexOfMin,set:s.noop,type:"fold",key:"minBy"}]),this.atIndex=e=>new i([...this.lenses,{get:t=>e>=0&&e<t.length?e:-1,set:s.noop,type:"fold",key:"atIndex"}]),this.filter=e=>new i([...this.lenses,{get:t=>t.reduce(((t,n,r)=>(e(n)&&t.push(r),t)),[]),set:s.noop,type:"foldMultiple",key:"filter"}]),this.slice=(e=0,t)=>new i([...this.lenses,{get:n=>{const r=e<0?n.length+e:e,s=void 0===t?n.length:t<0?n.length+t:t;return r>=s?[]:Array(s-r).fill(void 0).map(((e,t)=>t+r))},set:s.noop,type:"foldMultiple",key:`slice from ${null!=e?e:0} to ${null!=t?t:"end"}`}]),this.sort=(e=((e,t)=>`${e}`<`${t}`?-1:1))=>new i([...this.lenses,{get:t=>Object.entries(t).sort((([,t],[,n])=>e(t,n))).map((([e])=>e)),set:s.noop,type:"foldMultiple",key:"sort"}]),this.atKey=e=>new i([...this.lenses,{get:t=>t[e],set:(t,n)=>void 0!==n[e]?Object.assign(Object.assign({},n),{[e]:t}):n,key:`record key: ${e}`}]),this.toPartial=()=>new i([...this.lenses]),this.focusWithDefault=(e,t)=>new i([...this.lenses,{get:(0,s.stabilize)((n=>{const r=n[e];return null!=r?r:t(n)})),set:(t,n)=>Object.assign(Object.assign({},n),{[e]:t}),key:`focus ${e} with default`}]),this.\u02cd\u02cdunsafeGetLenses=()=>this.lenses,this.\u02cd\u02cdcovariance=()=>null,this.lenses=e}toString(){return this.getKeys().toString()}}t.Optic=i},2640:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.opticPartial=t.optic=void 0;const r=n(2137),s=n(7288);t.optic=function(e,t,n){return"function"==typeof e?new r.Optic([{get:(0,s.stabilize)(e),set:t,key:null!=n?n:"custom optic"}]):new r.Optic([{get:e=>e,set:e=>e,key:e||"custom optic"}])},t.opticPartial=function(e,t,n){return"function"==typeof e?new r.Optic([{get:(0,s.stabilize)(e),set:t,key:null!=n?n:"custom partial optic"}]):new r.Optic([{get:e=>e,set:e=>e,key:e||"custom partial optic"}])}},4553:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFoldTree=t.isFold=void 0;t.isFold=e=>e&&("fold"===e.type||"foldMultiple"===e.type);t.getFoldTree=(e,n)=>{const r=e.find(t.isFold);if(!r)return;const s=[],i=(e,n)=>{const[o,...c]=e;if(o===r){const e=s.length;return s.push(n),e}const u=o.get(n);return null!=u||(0,t.isFold)(c[0])?"mapped"===o.type?u.reduce(((e,t)=>{const n=i(c,t);return-1!==n&&e.push(n),e}),[]):i(c,u):-1},o=i(e,n),c=r.get(s);return((e,t)=>{const n=e=>{if("number"==typeof e)return t.has(e)?[]:void 0;let r=!0;const s=e.map((e=>{const t=n(e);return void 0!==t&&(r=!1),t}));return r?void 0:s},r=n(e);return null!=r?r:[]})(o,new Set(Array.isArray(c)?c:[c]))}},4321:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setStore=t.getStore=t.subscribe=t.createStore=t.useOpticReducer=t.useKeyedOptics=t.useOptic=t.opticPartial=t.optic=void 0;var s=n(2640);Object.defineProperty(t,"optic",{enumerable:!0,get:function(){return s.optic}}),Object.defineProperty(t,"opticPartial",{enumerable:!0,get:function(){return s.opticPartial}});const i=r(n(8695));t.useOptic=i.default;const o=r(n(3329));t.useKeyedOptics=o.default;const c=n(320);Object.defineProperty(t,"createStore",{enumerable:!0,get:function(){return c.createStore}}),Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return c.subscribe}}),Object.defineProperty(t,"getStore",{enumerable:!0,get:function(){return c.getStore}}),Object.defineProperty(t,"setStore",{enumerable:!0,get:function(){return c.setStore}});const u=r(n(5965));t.useOpticReducer=u.default},320:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.subscribe=t.setStore=t.getStore=void 0;const r=n(2137),s=new Map;t.getStore=e=>{var t;const n=e.\u02cd\u02cdunsafeGetLenses()[0].key;if("symbol"!=typeof n)throw new Error("This optic isn't linked to a store");return null===(t=s.get(n))||void 0===t?void 0:t[0]};t.setStore=e=>{var t,n;const r=null!==(n=null===(t=s.get(e.key))||void 0===t?void 0:t[1])&&void 0!==n?n:new Set;s.set(e.key,[e,r]),r.forEach((t=>t(e.state)))};t.subscribe=(e,n)=>{var r;const i=(0,t.getStore)(e),o=null===(r=s.get(i.key))||void 0===r?void 0:r[1];return null==o||o.add(n),()=>{null==o||o.delete(n)}},t.createStore=function(e,t){const n=Symbol(null!=t?t:"store");return s.set(n,[{key:n,state:e},new Set]),new r.Optic([{key:n,get:e=>e.state,set:(e,t)=>Object.assign(Object.assign({},t),{state:e})}])}},3329:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(7294),s=n(2137),i=n(7288),o=n(320);t.default=(e,t)=>{const n=(0,o.getStore)(e),c=(0,r.useRef)(t).current,u=(0,r.useRef)({}),l=t=>{var n;u.current=null!==(n=null==t?void 0:t.reduce(((t,n,r)=>{const i=c(n),o={get:e=>e[r],set:(e,t)=>[...t.slice(0,r),e,...t.slice(r+1)],key:"focus "+r},l=u.current[i];if(l){const e=l.\u02cd\u02cdunsafeGetLenses();e[e.length-1]=o,t[i]=l}else t[i]=e.compose(new s.Optic([o]));return t}),{}))&&void 0!==n?n:{}},a=(0,r.useRef)(i.noop),f=(0,r.useRef)();e!==f.current&&(u.current={},f.current=e,a.current(),a.current=(0,o.subscribe)(e,l),l(e.get(n)));return(0,r.useCallback)((e=>u.current[e]),[u])}},8695:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(7294),s=n(1688),i=n(320);t.default=function(e){return[(0,s.useSyncExternalStore)((t=>(0,i.subscribe)(e,t)),(()=>e.get((0,i.getStore)(e)))),(0,r.useCallback)((t=>{const n=(0,i.getStore)(e),r=e.set(t,n);(0,i.setStore)(r)}),[e])]}},5965:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(2640),o=r(n(8695));t.default=(e,t)=>{const[n,r]=(0,o.default)(e);return[n,(0,s.useCallback)((e=>r((n=>t(n,e,(0,i.optic)())))),[t,r])]}},7288:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.stabilize=void 0;t.stabilize=e=>{let t,n;return r=>(r===t||(n=e(r),t=r),n)};t.noop=()=>{}},3250:function(e,t,n){var r=n(7294);var s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,o=r.useEffect,c=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(r){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return c((function(){s.value=n,s.getSnapshot=t,l(s)&&a({inst:s})}),[e,n,t]),o((function(){return l(s)&&a({inst:s}),e((function(){l(s)&&a({inst:s})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:a},1688:function(e,t,n){e.exports=n(3250)}}]);