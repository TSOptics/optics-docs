"use strict";(self.webpackChunkoptics_docs=self.webpackChunkoptics_docs||[]).push([[2583],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>k});var n=t(7294);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var l=n.createContext({}),i=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):p(p({},a),e)),t},d=function(e){var a=i(e.components);return n.createElement(l.Provider,{value:a},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},N=n.forwardRef((function(e,a){var t=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=i(t),N=s,k=m["".concat(l,".").concat(N)]||m[N]||c[N]||r;return t?n.createElement(k,p(p({ref:a},d),{},{components:t})):n.createElement(k,p({ref:a},d))}));function k(e,a){var t=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var r=t.length,p=new Array(r);p[0]=N;var o={};for(var l in a)hasOwnProperty.call(a,l)&&(o[l]=a[l]);o.originalType=e,o[m]="string"==typeof e?e:s,p[1]=o;for(var i=2;i<r;i++)p[i]=t[i];return n.createElement.apply(null,p)}return n.createElement.apply(null,t)}N.displayName="MDXCreateElement"},8668:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>p,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>i});var n=t(7462),s=(t(7294),t(3905));const r={title:"Map/Reduce",sidebar_position:2},p=void 0,o={unversionedId:"Guides/map_reduce",id:"Guides/map_reduce",title:"Map/Reduce",description:"Map",source:"@site/docs/Guides/map_reduce.mdx",sourceDirName:"Guides",slug:"/Guides/map_reduce",permalink:"/optics-docs/docs/Guides/map_reduce",draft:!1,editUrl:"https://github.com/TSOptics/optics-docs/edit/master/docs/Guides/map_reduce.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Map/Reduce",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Total/Partial",permalink:"/optics-docs/docs/Guides/total_partial"},next:{title:"Jotai",permalink:"/optics-docs/docs/Guides/Comparisons/Jotai"}},l={},i=[{value:"Map",id:"map",level:2},{value:"Multi level",id:"multi-level",level:4},{value:"Reduce",id:"reduce",level:2},{value:"Back to one (or none)",id:"back-to-one-or-none",level:3}],d={toc:i},m="wrapper";function c(e){let{components:a,...t}=e;return(0,s.kt)(m,(0,n.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("div",{className:"shiki-twoslash-fragment"}),(0,s.kt)("h2",{id:"map"},"Map"),(0,s.kt)("p",null,"While a ",(0,s.kt)("inlineCode",{parentName:"p"},"total")," optic is focused on ",(0,s.kt)("strong",{parentName:"p"},"one")," value and a ",(0,s.kt)("inlineCode",{parentName:"p"},"partial")," optic is focused on ",(0,s.kt)("strong",{parentName:"p"},"zero or one")," value, a ",(0,s.kt)("strong",{parentName:"p"},"mapped")," optic is focused on ",(0,s.kt)("strong",{parentName:"p"},"multiple values"),".",(0,s.kt)("br",{parentName:"p"}),"\n","Such optic can read these values and update them simultaneously."),(0,s.kt)("p",null,"To illustrate that let's create a new state holding US national parks:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onState: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}[], total>"},"onState")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(alias) createState<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}[]>(initialValue: {\n    name: string;\n    visitors: number;\n    attractions: string[];\n}[], key?: string | undefined): Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}[], total>\nimport createState"},"createState")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"([")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  {")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) name: string"},"name"),": "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Zion"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) visitors: number"},"visitors"),": "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"5_039_835"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) attractions: string[]"},"attractions"),": ["),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"angels landing"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"great white throne"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"],")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  },")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  {")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) name: string"},"name"),": "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Yosemite"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) visitors: number"},"visitors"),": "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"3_287_595"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) attractions: string[]"},"attractions"),": ["),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"half dome"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"el capitan"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"mariposa grove"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"],")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  },")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  {")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) name: string"},"name"),": "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Yellowstone"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) visitors: number"},"visitors"),": "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"4_860_242"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) attractions: string[]"},"attractions"),": ["),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"old faithful"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"grand prismatic"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"],")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  },")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"]);"))))),(0,s.kt)("p",null,"The initial state is an array so we can call ",(0,s.kt)("inlineCode",{parentName:"p"},".map()")," to get a mapped optic, an optic that ",(0,s.kt)("strong",{parentName:"p"},"maps over")," the values of the array:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>",style:{borderBottom:"solid 2px lightgrey"}},"onNationalParks")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onState: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}[]>"},"onState")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) ArrayCombinators<{ name: string; visitors: number; attractions: string[]; }[], total, { name: string; visitors: number; attractions: string[]; }>.map(): Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"},"map")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"();")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"            "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"))))),(0,s.kt)("p",null,"From there we can get the name of every national park ..."),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNames: Optic<string, mapped>",style:{borderBottom:"solid 2px lightgrey"}},"onNames")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"},"onNationalParks")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) name: Optic<string, mapped>"},"name")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},";")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"        "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onNames: Optic<string, mapped>")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNames: Optic<string, mapped>"},"onNames")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Zion', 'Yosemite', 'Yellowstone']"))))),(0,s.kt)("p",null,"... or update them all at once:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNames: Optic<string, mapped>"},"onNames")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) set(a: string | ((prev: string) => string)): void"},"set")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"((",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) prev: string"},"prev"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},"`${"),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) prev: string"},"prev")),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},"} National Park`"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNames: Optic<string, mapped>"},"onNames")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Zion National Park', 'Yosemite National Park', 'Yellowstone National Park']"))))),(0,s.kt)("p",null,"Same thing but for the annual number of visitors:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onVisitors: Optic<number, mapped>",style:{borderBottom:"solid 2px lightgrey"}},"onVisitors")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"},"onNationalParks")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) visitors: Optic<number, mapped>"},"visitors")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},";")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"          "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onVisitors: Optic<number, mapped>")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onVisitors: Optic<number, mapped>"},"onVisitors")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): number[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// [5_039_835, 3_287_595, 4_860_242]")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onVisitors: Optic<number, mapped>"},"onVisitors")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) set(a: number | ((prev: number) => number)): void"},"set")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"((",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) prev: number"},"prev"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) prev: number"},"prev")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"+"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"1_000_000"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onVisitors: Optic<number, mapped>"},"onVisitors")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): number[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// [6_039_835, 4_287_595, 5_860_242]"))))),(0,s.kt)("p",null,"The update function is applied to every focused value, which is convenient to update or reset a large number of values all at once."),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"The new optics you derive from a mapped optic are themselves mapped optics !")),(0,s.kt)("h4",{id:"multi-level"},"Multi level"),(0,s.kt)("p",null,"You can call ",(0,s.kt)("inlineCode",{parentName:"p"},".map()")," every time the focused value is an array, even if the optic is ",(0,s.kt)("strong",{parentName:"p"},"already a mapped one"),":"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>",style:{borderBottom:"solid 2px lightgrey"}},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"},"onNationalParks")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) attractions: Optic<string[], mapped>"},"attractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) ArrayCombinators<string[], mapped, string>.map(): Optic<string, mapped>"},"map")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"();")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"           "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onAttractions: Optic<string, mapped>"))))),(0,s.kt)("p",null,"Here ",(0,s.kt)("inlineCode",{parentName:"p"},"onAttractions")," is a mapped optic focused on every attraction from every national park."),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['angels landing', 'great white throne', 'half dome', 'el capitan', 'mariposa grove', 'old faithful', 'grand prismatic']")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) set(a: string | ((prev: string) => string)): void"},"set")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"("),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const capitalize: (s: string) => string"},"capitalize")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Angels Landing', 'Great White Throne', 'Half Dome', 'El Capitan', 'Mariposa Grove', 'Old Faithful', 'Grand Prismatic']"))))),(0,s.kt)("p",null,"Calling ",(0,s.kt)("inlineCode",{parentName:"p"},".get()")," returns a flat representation of all attractions, even though in the root state they are nested in their respective national parks."),(0,s.kt)("p",null,"Updating them with ",(0,s.kt)("inlineCode",{parentName:"p"},".set()")," preserves the state's original structure.",(0,s.kt)("br",{parentName:"p"}),"\n","We can see that if we look at our state, now that we've applied all these transformations thanks to mapped optics:"),(0,s.kt)("pre",{className:"shiki solarized-dark",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// onNationalParks.get();")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"[")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  {")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    name: "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Zion National Park"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    visitors: "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"6_039_835"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    attractions: ["),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Angels Landing"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Great White Throne"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"],")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  },")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  {")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    name: "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Yosemite National Park"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    visitors: "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"4_287_595"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    attractions: ["),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Half Dome"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"El Capitan"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Mariposa Grove"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"],")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  },")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  {")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    name: "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Yellowstone National Park"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    visitors: "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"5_860_242"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},",")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"    attractions: ["),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Old Faithful"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"Grand Prismatic"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"],")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  },")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"];"))))),(0,s.kt)("admonition",{title:"cardinality recap",type:"tip"},(0,s.kt)("ul",{parentName:"admonition"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"total: 1..1")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"partial: 0..1")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"mapped: 0..n")))),(0,s.kt)("h2",{id:"reduce"},"Reduce"),(0,s.kt)("p",null,"Mapped optics have special methods called ",(0,s.kt)("strong",{parentName:"p"},"reduce")," methods.",(0,s.kt)("br",{parentName:"p"}),"\n","They yield new optics that, from the originally focused values, ",(0,s.kt)("strong",{parentName:"p"},"reduce")," them into a new one (a bit like JavaScript's ",(0,s.kt)("inlineCode",{parentName:"p"},"Array.reduce"),")."),(0,s.kt)("p",null,"For example to focus on all attractions sorted by name...:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onSortedAttractions: Optic<string, mapped>"},"onSortedAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) MappedCombinators<string>.reduceSort(compareFn?: ((a: string, b: string) => number) | undefined): Optic<string, mapped>"},"reduceSort")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"((",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: string"},"a"),", ",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) b: string"},"b"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: string"},"a")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) String.localeCompare(that: string, locales?: string | string[] | undefined, options?: Intl.CollatorOptions | undefined): number (+1 overload)"},"localeCompare")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"("),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) b: string"},"b")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},")")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onSortedAttractions: Optic<string, mapped>"},"onSortedAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Angels Landing', 'El Capitan', 'Grand Prismatic', 'Great White Throne', 'Half Dome', 'Mariposa Grove', 'Old Faithful']"))))),(0,s.kt)("p",null,"... and then to focus on the first three:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onFirstThreeSorted: Optic<string, mapped>"},"onFirstThreeSorted")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onSortedAttractions: Optic<string, mapped>"},"onSortedAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) MappedCombinators<string>.reduceSlice(start?: number | undefined, end?: number | undefined): Optic<string, mapped>"},"reduceSlice")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"("),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"0"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},", "),(0,s.kt)("span",{parentName:"div",style:{color:"#D33682"}},"3"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onFirstThreeSorted: Optic<string, mapped>"},"onFirstThreeSorted")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Angels Landing', 'El Capitan', 'Grand Prismatic']")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onFirstThreeSorted: Optic<string, mapped>"},"onFirstThreeSorted")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) set(a: string | ((prev: string) => string)): void"},"set")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"((",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) prev: string"},"prev"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) prev: string"},"prev")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) String.toUpperCase(): string"},"toUpperCase")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"());")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['ANGELS LANDING', 'Great White Throne', 'Half Dome', 'EL CAPITAN', 'Old Faithful', 'Mariposa Grove', 'GRAND PRISMATIC']"))))),(0,s.kt)("h3",{id:"back-to-one-or-none"},"Back to one (or none)"),(0,s.kt)("p",null,"The above examples return new ",(0,s.kt)("inlineCode",{parentName:"p"},"mapped")," optics but some reduce methods can also give us a ",(0,s.kt)("inlineCode",{parentName:"p"},"partial")," optic by ",(0,s.kt)("strong",{parentName:"p"},"reducing back to a single value"),"."),(0,s.kt)("p",null,"For example to focus on the first attraction starting with the letter G:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onFirstStartingWithG: Optic<string, partial>"},"onFirstStartingWithG")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) MappedCombinators<string>.reduceFindFirst(predicate: (a: string) => boolean): Optic<string, partial>"},"reduceFindFirst")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"((",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) attraction: string"},"attraction"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) attraction: string"},"attraction")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) String.startsWith(searchString: string, position?: number | undefined): boolean"},"startsWith")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"("),(0,s.kt)("span",{parentName:"div",style:{color:"#2AA198"}},'"G"'),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},")")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onFirstStartingWithG: Optic<string, partial>",style:{borderBottom:"solid 2px lightgrey"}},"onFirstStartingWithG")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string | undefined"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// 'Great White Throne'")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"         "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onFirstStartingWithG: Optic<string, partial>"))))),(0,s.kt)("p",null,"Or to focus on the attraction with the shortest name:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onShortestName: Optic<string, partial>"},"onShortestName")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onAttractions: Optic<string, mapped>"},"onAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) MappedCombinators<string>.reduceMin(f: (a: string) => number): Optic<string, partial>"},"reduceMin")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"((",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) name: string"},"name"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) name: string"},"name")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},".",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) String.length: number"},"length"),");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onShortestName: Optic<string, partial>",style:{borderBottom:"solid 2px lightgrey"}},"onShortestName")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string | undefined"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// 'Half Dome'")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"      "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onShortestName: Optic<string, partial>"))))),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"We get a ",(0,s.kt)("strong",{parentName:"p"},"partial optic")," instead of a total one because the mapped optic might yield no value at all, in case the arrays we mapped over are empty.")),(0,s.kt)("details",null,(0,s.kt)("summary",null,"Reduce methods vs Array methods"),(0,s.kt)("p",null,"You might have noticed that the reduce methods look a lot like the methods\navailable to optics focused on arrays (e.g.\n",(0,s.kt)("inlineCode",{parentName:"p"},"reduceFindFirst")," vs ",(0,s.kt)("inlineCode",{parentName:"p"},"findFirst"),").",(0,s.kt)("br",{parentName:"p"}),"\n","The difference is that array methods only operate on the array that's currently focused by the optic,\nwhile reduce methods operate on the whole mapping."),(0,s.kt)("p",null,"It means that ..."),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onLongestForEachPark: Optic<string, mapped>"},"onLongestForEachPark")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"},"onNationalParks")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) attractions: Optic<string[], mapped>"},"attractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) ArrayCombinators<string[], mapped, string>.max(f: (a: string) => number): Optic<string, mapped>"},"max")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  (",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) attraction: string"},"attraction"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) attraction: string"},"attraction")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},".",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) String.length: number"},"length"))),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onLongestForEachPark: Optic<string, mapped>",style:{borderBottom:"solid 2px lightgrey"}},"onLongestForEachPark")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[]"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Great White Throne', 'Mariposa Grove', 'Grand Prismatic']")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"         "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onLongestForEachPark: Optic<string, mapped>"))))),(0,s.kt)("p",null,"... is different from:"),(0,s.kt)("pre",{className:"shiki solarized-dark twoslash lsp",style:{backgroundColor:"#002B36",color:"#839496"}},(0,s.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,s.kt)("div",{parentName:"pre",className:"code-container"},(0,s.kt)("code",{parentName:"div"},(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"const"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onMostAttractions: Optic<string[], partial>"},"onMostAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#859900"}},"="),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onNationalParks: Optic<{\n    name: string;\n    visitors: number;\n    attractions: string[];\n}, mapped>"},"onNationalParks")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) attractions: Optic<string[], mapped>"},"attractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) MappedCombinators<string[]>.reduceMax(f: (a: string[]) => number): Optic<string[], partial>"},"reduceMax")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(")),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"  (",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) attractions: string[]"},"attractions"),") "),(0,s.kt)("span",{parentName:"div",style:{color:"#93A1A1"}},"=>"),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}}," "),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(parameter) attractions: string[]"},"attractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},".",(0,s.kt)("data-lsp",{parentName:"span",lsp:"(property) Array<T>.length: number"},"length"))),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},");")),(0,s.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.kt)("div",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"const onMostAttractions: Optic<string[], partial>",style:{borderBottom:"solid 2px lightgrey"}},"onMostAttractions")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"."),(0,s.kt)("span",{parentName:"div",style:{color:"#268BD2"}},(0,s.kt)("data-lsp",{parentName:"span",lsp:"(method) get<GetStateOptions | undefined>(options?: GetStateOptions | undefined): string[] | undefined"},"get")),(0,s.kt)("span",{parentName:"div",style:{color:"#839496"}},"(); "),(0,s.kt)("span",{parentName:"div",style:{color:"#586E75"}},"// ['Half Dome', 'El Capitan', 'Mariposa Grove']")),(0,s.kt)("div",{parentName:"code",className:"meta-line"},(0,s.kt)("span",{parentName:"div",className:"popover-prefix"},"       "),(0,s.kt)("span",{parentName:"div",className:"popover"},(0,s.kt)("div",{parentName:"span",className:"arrow"}),"const onMostAttractions: Optic<string[], partial>"))))),(0,s.kt)("p",null,"The first example is a ",(0,s.kt)("inlineCode",{parentName:"p"},"mapped")," optic that focuses on the attraction with the longest name for each national park.",(0,s.kt)("br",{parentName:"p"}),"\n","The second example is a ",(0,s.kt)("inlineCode",{parentName:"p"},"partial")," optic focused on the attractions of the national park that has the most attractions (Yosemite).")))}c.isMDXComponent=!0}}]);